<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Rank Tracker</title>
    <link rel="stylesheet" href="index.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <div id="header">
        <div class="nav-links">
            <a href="#logo">Logo</a>
        </div>
        <h1 class="text-white">Local Rank Tracker</h1>
        <div class="header-buttons">
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#registerModal">Register</button>
            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#loginModal">Login</button>
        </div>
    </div>

    <main>
        <div class="container text-center">
            <p id="description" class="animated">Simplify your local business tracking! Our tool is designed for everyone, making it easy to navigate and use, even if you're not tech-savvy.</p>
        </div>

        <div class="container text-center" id="about">
            <h2 class="animated larger-text">Why Choose Us?</h2>
            <p class="animated">Affordable, user-friendly, and effective! Local Rank Tracker offers a straightforward way to track your business rankings without the complexity.</p>
        </div>

        <div class="container text-center" id="features">
            <h2 class="animated larger-text">Features</h2>
            <div class="row">
                <div class="col-md-4 animated d-flex justify-content-center">
                    <div class="animation-box text-center" style="flex: 1;">
                        <h4>Cost-Effective</h4>
                        <p>Get the best value for your money with our competitive pricingâ€”perfect for small businesses.</p>
                    </div>
                </div>
                <div class="col-md-4 animated d-flex justify-content-center">
                    <div class="animation-box text-center" style="flex: 1;">
                        <h4>Easy to Use</h4>
                        <p>Navigate our platform effortlessly, with clear instructions and simple design.</p>
                    </div>
                </div>
                <div class="col-md-4 animated d-flex justify-content-center">
                    <div class="animation-box text-center" style="flex: 1;">
                        <h4>Instant Insights</h4>
                        <p>Access essential data quickly, helping you make informed decisions without any hassle.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="container text-center" id="cta">
            <h2 class="animated larger-text">Ready to Simplify Your Tracking?</h2>
            <p class="animated">Join Local Rank Tracker today for an easy and affordable tracking solution!</p>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#registerModal">Get Started</button>
            <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#pricingModal">Check Pricing Plans</button>
        </div>
    </main>

    <!-- Register Modal -->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="registerModalLabel">Register</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="register-alert" class="alert d-none" role="alert"></div>
                    <form id="register-form">
                        <div class="mb-3">
                            <label for="username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="username" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" required>
                        </div>
                        <div class="mb-3">
                            <label for="confirm-password" class="form-label">Confirm Password</label>
                            <input type="password" class="form-control" id="confirm-password" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Register</button>
                    </form>
                    <p class="mt-2">Already registered? <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Log in here</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginModalLabel">Login</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="login-alert" class="alert d-none" role="alert"></div>
                    <form id="login-form">
                        <div class="mb-3">
                            <label for="login-username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="login-username" required>
                        </div>
                        <div class="mb-3">
                            <label for="login-password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="login-password" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Login</button>
                    </form>
                    <p class="mt-2">Not registered yet? <a href="#" data-bs-toggle="modal" data-bs-target="#registerModal">Register here</a></p>
                    <p class="mt-2">Forgot your username/password? <a href="resetpw.html">Reset it here</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Local Rank Tracker. All rights reserved.</p>
        <div class="footer-links">
            <a href="#about">About Us</a>
            <a href="#contact">Contact Us</a>
        </div>
        <div class="social-media">
            <a href="#facebook">Facebook</a>
            <a href="#twitter">Twitter</a>
            <a href="#linkedin">LinkedIn</a>
        </div>
    </footer>

    <script>
        $(document).ready(function () {
            $('.animated').each(function (i) {
                var element = $(this);
                setTimeout(function () {
                    element.addClass('show');
                }, 200 * i);
            });
            $('#register-form').on('submit', function(e) {
                e.preventDefault();
    
                const username = $('#username').val();
                const email = $('#email').val();
                const password = $('#password').val();
                const confirmPassword = $('#confirm-password').val();
    
                $('#register-alert').addClass('d-none');
    
                if (password !== confirmPassword) {
                    $('#register-alert')
                        .removeClass('d-none alert-success')
                        .addClass('alert-danger')
                        .text('Passwords do not match.');
                    return;
                }
    
                $.post('/register', { username, email, password, confirmPassword })
                    .done(function(data) {
                        $('#register-alert')
                            .removeClass('d-none alert-danger')
                            .addClass('alert-success')
                            .html('Registration successful! Please <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal">log in</a>.');
                    })
                    .fail(function(xhr) {
                        $('#register-alert')
                            .removeClass('d-none alert-success')
                            .addClass('alert-danger')
                            .text(xhr.responseJSON.message);
                    });
            });
    
            $('#login-form').on('submit', function(e) {
                e.preventDefault();
                const username = $('#login-username').val();
                const password = $('#login-password').val();
    
                $('#login-alert').addClass('d-none');
    
                $.post('/login', { username, password })
                    .done(function(data) {
                        localStorage.setItem('username', username);
                        localStorage.setItem('token', data.token);
                        $('#login-alert').removeClass('d-none alert-danger').addClass('alert-success').text(data.message);
                        setTimeout(() => {
                            window.location.href = '/home';
                        }, 500);
                    })
                    .fail(function(xhr) {
                        $('#login-alert').removeClass('d-none alert-success').addClass('alert-danger').text(xhr.responseJSON.message);
                    });
            });
        });
    </script>

</body>
</html>
